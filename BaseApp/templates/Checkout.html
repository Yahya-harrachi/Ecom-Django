{% extends 'structure.html' %}

{% block content %}
  <h2>Checkout</h2>

  <form method="POST" action="{% url 'process_checkout' %}">
    {% csrf_token %}

    <h3>Billing Details</h3>
    <label>Full Name</label><br />
    <input type="text" name="name" required /><br /><br />

    <label>Address</label><br />
    <input type="text" name="address" required /><br /><br />

    <label>Phone</label><br />
    <input type="text" name="phone" required /><br /><br />

    <h3>Cart Items</h3>
    {% if cart %}
      <ul>
        {% for item in cart %}
          <li>
            {{ item.product_name }} (x{{ item.quantity }}) - {{ item.total_price|floatformat:2 }} MAD
          </li>
        {% endfor %}
      </ul>
      <h4>Total: {{ total|floatformat:2 }} MAD</h4>
    {% else %}
      <p>Your cart is empty.</p>
    {% endif %}

    <button type="submit" {% if not cart %}disabled{% endif %}>Place Order</button>
  </form>
{% endblock %}
